{% extends "base.html" %}

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

{% block head %}
<title>Bunjil Forest Watch - New Area</title>

<link rel="stylesheet" href="/static/css/drawing-tools.css">
<link rel="stylesheet" href="/static/css/codemirror.css">
<link rel="stylesheet" href="/static/css/simplescrollbars.css">
<link rel="stylesheet" href="/static/css/lint.css">
<link rel="stylesheet" href="/static/css/new-area.css">

<script type="text/javascript">
	var single_map = true;
	var view_mode = "view-area";
	var initial_dragger = "100%";
</script>


{% endblock %} {% block map_head %} {% endblock map_head %} {% block content %}



<!-- NO BREADCRUMBS REQUIRED FOR THIS PAGE -->

<div id='area_json' class='django-template'>{{ area_json}}</div>
<div id='celllist' class='django-template'>{{ celllist }}</div>
<div id='latlng' class='django-template'>{{ latlng}}</div>
<div id='user_name' class='django-template'>{{ user.name }}</div>
<div id='user_url' class='django-template'>{{ "user"|url(user.name) }}</div>

<div class="space-above-form"></div>

<div class="container">

	<div id="new_area_form" class="form-horizontal">

		<!-- Form Name -->
		<div class='form-legend'>
			Register your forest area
			<!-- <span class="glyphicon glyphicon-question-sign" ></span> -->
		</div>
		<div class='framing-help'>
			If you live or work near a forest and want to protect it then register it for monitoring.<br />
		</div>
		<div class='framing-sub-help'>
			Volunteers don't have to register a forest. They can <a href='/'>help others monitor their forests</a>.
		</div>
		<hr>
		<div class="row ">
			<!-- Area Name -->
			<div class="form-group">
				<label class="col-md-4 control-label" for="area_name"><span class='asterix' title="This field is required">*</span>
					Area Name </label>
				<div class="col-md-4">
					<input id="area_name" name="area_name" type="text" autofocus placeholder="Give your area a short name"
						class="form-control input-md" accesskey="n" tabindex="1"> <span class="help-block">Give your area a short unique name</span>
					<div class='validation' id='area-name-validation'>Give your area a short name.</div>
				</div>
			</div>
			<hr>
			<div class="controls">
				<input id="geojson_toserver" name="geojson_toserver" type="hidden" value="undefined">
			</div>
			<div class="panel-group" id="options-accordion">
				<!-- Public or Private  sharing options accordion panel panel-info -->
				<div>
					<!-- panel panel-info -->
					<div class="panel-heading">
						<!-- panel-heading -->
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="options-accordion" id="sharingAccord_title"> Sharing Options </a>
						</h4>
					</div>
					<!-- panel body -->
					<div id="sharingAccord" class="panel-collapse collapse in">
						<div class="panel-body">
							<div class="form-group">
								<label class="col-md-4 control-label" for="opt-sharing"><span class='asterix' title="This field is required">*</span>Public
									or Private? </label>
								<div class="col-md-6">
									<div class="radio" id='private'>
										<label for="private"> <input type="radio" name="opt-sharing" value="private" accesskey="r" tabindex="2">
											Private
										</label>
									</div>
									<span class="help-block">Only you can see and monitor this area. Volunteers can't see it and won't be able to
										help you monitor. See <a href="http://bunjilforestwatch.net/privacy">Privacy</a>
									</span>

									<div class="radio" id='unlisted'>
										<label for="unlisted"> <input type="radio" name="opt-sharing" value="unlisted" accesskey="u" tabindex="3">
											Unlisted
										</label>
									</div>
									<span class="help-block">Only people with the link can see or follow this area</span>

									<div class="radio" id='public'>
										<label for="public"> <input type="radio" name="opt-sharing" value="shared" accesskey="p" tabindex="4">
											Public
										</label>
									</div>
									<span class="help-block">Everyone can see and follow this area.</span>

									<div class='validation' id='sharing-validation'>Choose public, private or unlisted.</div>

								</div>
							</div>
						</div>
					</div>
				</div>
				<div>
					<!-- panel panel-info Monitoring Options Accordion -->
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="options-accordion" id="monitoringAccord_title"> Monitoring Options </a>
						</h4>
					</div>
					<!-- panel body -->
					<div id="monitoringAccord" class="panel-collapse collapse in">
						<div class="panel-body">
							<div class="form-group">
								<label class="col-md-4 control-label" id="opt-monitoring">Monitoring Options</label>
								<div class="col-md-6">
									<div class="checkbox">
										<label for="self-monitor"> <input type="checkbox" name="self-monitor" checked="checked" id="self-monitor"
											accesskey="m" tabindex="5" value="self-monitor"> Self-monitor
										</label> <span class="help-block">Notify me when there are new images of my area. I have time and bandwidth to review
											images</span>
									</div>
									<div class="checkbox">
										<label for="request-volunteers"> <input type="checkbox" checked="checked" name="request-volunteers"
											accesskey="v" tabindex="6" id='request-volunteers' value="request-volunteers"> Community monitoring</label>
											<span class="help-block">Ask Volunteers to help monitor my area. I don't have the ability to monitor images for changes.</span>
									</div>
									<div class='validation' id='monitoring-validation'>Either self-monitor or request volunteers.</div>
								</div>
							</div>
						</div>
					</div>
				</div>
		
			<div class="panel-heading"> <!-- Agreement Undertaking -->
				<h4 class="panel-title">
					<a data-toggle="collapse" data-parent="options-accordion" id="agreementAccord_title">Agree to Monitor</a>
				</h4>
			</div>
			<div id="agreementAccord" class="panel-collapse collapse in">
				<div class="panel-body">
					<div class="form-group">
						<label class="col-md-4 control-label" for="accept"><span class='asterix'
							title="You must agree to investigate disturbances to request volunteers">*</span>I Accept</label>
						<div class="col-md-6">
							<label class="checkbox-inline" for="accept"> <input type="checkbox" name="accept" id="accept" value="true"
								accesskey=" " tabindex="7"> I agree to investigate disturbances to this area reported by volunteers
							</label>
							<div class='validation' id='accept-validation'>To register an area you must agree to investigate reports in your
								area.</div>
						</div>
					</div>
				</div>
				<hr>
			</div>
       </div>
			<!-- NEXT -->
			<div id='next-subform' class="form-group">
				<label class="col-md-4 control-label" for="accept"><button id="next-area" name="next-area" accesskey="x"
						tabindex="8" class="btn btn-default btn-form-ctrl">Next</button></label>
				<div class="col-md-8">
					<div id='form-errors' class="help-block"></div>
				</div>
			</div>
		</div>
		<div class="row" id='scroll-to-here'></div>
		<div class="row" id='map-find' style='display: none'>
			<!-- Help Locate your Area -->

			<div class="panel-group" id="locate-accordion">
				<!-- Help Locate accordion -->
				<div id='helplocateAccord_c'>
					<!-- panel panel-info -->
					<div class="panel-heading">
						<!-- panel-heading -->
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#locate-accordion" id="helplocateAccord_title"> Help Finding your area</a>
						</h4>
					</div>
					<!-- panel body -->
					<div id="helplocateAccord" class="panel-collapse collapse in">
						<div class="panel-body">

							<div class='form-legend'>Locate your Area</div>
							<div id='subform-find-help'>
								<div class="row">
									<div class="col-md-1"></div>
									<div class="col-md-6">
										<label class="subform-control-label">Need help finding your area?</label>
									</div>
									<div class="col-md-5"></div>
								</div>
								<div class="row">
									<div class="col-md-1"></div>
									<div class="col-md-3 form-group">
										<label class="control-label ">My Forest is here</label>
										<button id="zoom-here" name="zoom-here" class="btn btn-default">Use My Location</button>
										<p id='zoom-here-help' class="help-block">Click if your forest is near you now.</p>
									</div>
									<div class="col-md-7 form-group">
										<label class="control-label" for='searchbox_id'>Find by name</label> <input id="searchbox_id" name="searchinput"
											type="text" placeholder="Enter name of a place near your area" class="form-control input-md">
										<p class="help-block">Map will zoom to that place</p>
									</div>
									<div class="col-md-1"></div>
								</div>
							</div>

						</div>
					</div>
				</div>
				<div id='drawlocateAccord_c'>
					<!-- Draw Location Accordion -->
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#locate-accordion" id="drawlocateAccord_title"> Mark your area on the map</a>
						</h4>
					</div>
					<!-- panel body -->
					<div id="drawlocateAccord" class="panel-collapse collapse in">
						<div class="panel-body">
							<!-- DRAWING MODE BUTTONS -->
							<div class="row">
								<!--  LANDSAT GRID -->
								<div class='col-md-1'>
									<input id="landsat-grid" type="checkbox" checked value='true'> <label> <span
										class="glyphicon glyphicon-th" data-toggle="tooltip" title="Show grid of the shape of Landsat images"
										style='color: #234196'></span>
									</label>
								</div>
								<div class="col-md-6">
									<label class="subform-control-label">Mark your area on the map</label>
								</div>
								<div class="col-md-5"></div>
							</div>

							<!-- MOVE DRAG THEN PLACE-MARK -->
							<div class="row" id='drag-map-form'>
								<div class="col-md-1 "></div>
								<div class="col-md-2 form-group">
									<button id="drop-pin-mode" name="drop-pin" class="btn btn-primary" data-toggle="popover-x"
										data-target='#zoom-more-popover' data-placement="top">
										Place mark <span class="glyphicon glyphicon glyphicon-map-marker" style='color: #FA7063'></span>
									</button>
									<div id="zoom-more-popover" class='popover popover-info' data-toggle="popover-x">
										<div class="arrow"></div>
										<h3 class="popover-title">Zoom in closer!</h3>
										<div class="popover-content">
											To place a mark accurately you must zoom in more.<br /> <b>Double Click</b> near your area on the map to zoom in
											more.<br /> Or use the zoom slider on the left side of the map.
										</div>
										<div class="popover-footer">
											<button id='zoom-more-popover-close' class="btn btn-sm btn-info">Close</button>
										</div>
									</div>
								</div>
								<div class="col-md-7 form-group">
									<label id='move-map-label' style='text-align: left' class="control-label"> <a class="popup" id="zoom-help"
										data-trigger='hover click' data-toggle="popover-x" data-target='#zoom-help-popover' data-placement="bottom">Zoom</a>
										and <a class="popup" id="drag-help" data-trigger='hover click' data-toggle="popover-x"
										data-target='#drag-help-popover'> Drag</a> the map so it shows your area. Then click <i>Place Mark</i>
									</label>
									<div id="zoom-help-popover" class='popover popover-info'>
										<div class="arrow"></div>
										<h3 class="popover-title">Zooming</h3>
										<div class="popover-content">
											To zoom in more <b>Double Click</b> near your area on the map.<br /> Or use the zoom slider on the left side of the
											map.
										</div>
										<div class="popover-footer">
											<button id='zoom-help-popover-close' class="btn btn-sm btn-info">Close</button>
										</div>
									</div>
									<div id="drag-help-popover" class='popover popover-info'>
										<div class="arrow"></div>
										<h3 class="popover-title">Moving the Map</h3>
										<div class="popover-content">
											To drag the map <b>Click and Hold </b> the mouse over the map.<br /> Or use the arrows on the top left corner of the
											map.
										</div>
										<div class="popover-footer">
											<button id='drag-help-popover-close' class="btn btn-sm btn-info">Close</button>
										</div>
									</div>

								</div>
							</div>

							<div class="row">
								<div class='col-md-1'></div>

								<!-- MARKING-MAP-->
								<div id=mark-map-form>
									<div class="col-md-7 form-group">
										<label class="control-label"> Click on the map over your area to mark where it is. </label>
									</div>
								</div>
								<!-- SAVING-AREA-->
								<div id=save-area-form>
									<div class='col-md-2'>
										<button id="save-area" name="move-map" class="btn btn-primary">
											Save <span class="glyphicon glyphicon glyphicon-save" style='color: #FA7063'></span>
										</button>
										<div id="save-wait-popover" class='popover popover-info popover-lg' data-toggle="popover-x"
											data-target='#save-wait-popover1' style='display: none' data-placement='right'>
											<div id='save-wait-popover1' class="arrow"></div>
											<h3 class="popover-title">Saving Area</h3>
											<div class="popover-content">Please wait while your area is saved.</div>
											<div class="popover-footer">
												<button id='close-dialog-save-area-wait' class="btn btn-sm btn-default">Close</button>
											</div>
										</div>

									</div>
									<div class="col-md-5 form-group">
										<label class="control-label"> If mark is over your area click <i>Save area</i>
										</label>
									</div>

								</div>
							</div>
							<!-- MOVE MAP LINK -->
							<div class="form-group" id='move-map-form'>
								<div class="col-md-1">
									<button id="move-map-mode" name="move-map-mode" class="btn btn-small" data-toggle="tooltip"
										title="Reposition the map view">
										Drag Map<span class="glyphicon glyphicon glyphicon-hand-up" style='color: #FA7063'></span>
									</button>
								</div>
								<div class="col-md-1"></div>
								<div class="col-md-1">
									<button id="clear-map" name="clear-map" class="btn btn-small" data-toggle="tooltip" title="Clear all marks on the map">
										Clear <span class="glyphicon glyphicon glyphicon-erase" style='color: #FA7063'></span>
									</button>
								</div>
								<div class="col-md-1">
									<img id='advanced' src="/static/img/gear-icon.png" alt="Advanced" style="width: 20px; height: 20px">
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
			     </div>
            <!--  DESCRIPTION  -->
			<div class='row' id='update-area-form' style='display: none'>
			<div class="panel-group">
			 <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="options-accordion" id="agreementAccord_title">Describe your area</a>
                </h4>
                <p>Now is a good time to tell other users about your area.  
            </div>
            <div id="descriptionAccord" class="panel-collapse collapse in">
                <div class="accordion-group">
                <!-- 
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse in" href="#area_descr_panel">Description</a>
                    </div>  -->
                    <div id="area_descr_panel" class="accordion-body collapse in" data-toggle="collapse">
                        <div class="accordion-inner">
                            <div class="accordion" id="inner_accordion">
                                <div class="accordion-group">
                                    <div class="accordion-heading">
                                        <a class="accordion-toggle" data-toggle="collapse" href="#area_descr_what">Area Description</a>
                                    </div>
                                    <div id="area_descr_what" class="accordion-body collapse in">
                                        <div class="accordion-inner small">
                                            <textarea rows="3" class="map-panel-controls" id="area_descr_what_text" name="description-what"
                                                placeholder="Tell volunteers  a little about the area or park are you protecting. You can enter a link to a wiki page"
                                                form="new_area_form" cols=""></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-group">
                                    <div class="accordion-heading">
                                        <a class="accordion-toggle" data-toggle="collapse" href="#area_descr_why"> Why's this area important?</a>
                                    </div>
                                    <div id="area_descr_why" class="accordion-body collapse ">
                                        <div class="accordion-inner small">
                                            <textarea rows="3" class="map-panel-controls" id="area_descr_why_text" name="description-why"
                                                placeholder="Explain why it's important to monitor this area" form="new_area_form" cols=""></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-group">
                                    <div class="accordion-heading">
                                        <a class="accordion-toggle" data-toggle="collapse" href="#area_descr_who"> Who's monitoring it?</a>
                                    </div>
                                    <div id="area_descr_who" class="accordion-body collapse ">
                                        <div class="accordion-inner small">
                                            <textarea rows="3" class="map-panel-controls" id="area_descr_who_text" name="description-who"
                                                placeholder="Who is going to act on reports of disturbances in this area" form="new_area_form" cols=""></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-group">
                                <div class="accordion-heading">
                                    <a class="accordion-toggle" data-toggle="collapse" href="#area_descr_how"> How's it protected?</a>
                                </div>
                                <div id="area_descr_how" class="accordion-body collapse ">
                                    <div class="accordion-inner small">
                                        <textarea rows="3" class="map-panel-controls" id="area_descr_how_text" name="description-how"
                                            placeholder="How is this area protected? For example, Is it a national park or a native area? " form="new_area_form"
                                            cols=""></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
           
           
                <hr>
            </div>
				
				
				
				

				
			</div>
			</div>
			<!--  DEFINE AREA - BOUNDARY SELECTION  -->
			<div>
				<fieldset id='boundary-form' class='control-label map-panel-controls' style='display: none'>

					<div class='form-legend control-label'>
						Area boundary <span style="color: #ff0000">*</span>
					</div>
					<div class='framing-help'>
						You can draw the boundary of your area now, or enter it from another source.<br />
					</div>
					<div class='framing-sub-help'>The boundary defines the size and shape of the area to select the best images and to
						help observers.</div>
					<div class="radio">
						<label><input type="radio" name="opt-fusion" value="is-drawmap">Draw my area on a map</label>
					</div>
					<div class="radio">
						<label><input type="radio" name="opt-fusion" value="is-fusion">Area's boundary is in a fusion table</label>
					</div>
				</fieldset>
			</div>


			<div class="row" id='map-row' style='display: none'>

				<!-- MAP APPEARS HERE -->
				<div id='map-column' class='col-md-12 nopadding '>
					<div id='map-canvas-c' class='map-canvas'>
						<div id="drop-container">
							<div id="drop-silhouette"></div>
						</div>
						<div id="map-canvas"></div>
					</div>
				</div>
				<div id='geojson-column' class='col-md-3 nopadding' style='display: none'>

					<!--  GeoJSON -->
					<div id='geojson-editor' class='extended-content-container'>
						<div id='geojson-panel'>

							<div id="geojson-controls" class='help-block'>
								<div id="panel-title">Edit GeoJSON</div>
								<a id="select-all" class="btn btn-sm btn-default">Select All</a> <a id="download-link" href="data:;base64,"
									download="my_area.json" class="btn btn-sm btn-default">Download<span
									class="glyphicon glyphicon glyphicon-download-alt" style='color: #FA7063'></span></a>
							</div>
							<textarea id="geojson-input" placeholder="Drag GeoJSON to map" cols="" rows=""></textarea>
						</div>
					</div>
				</div>
			</div>





			<!--  NEXT BUTTON  -->
			<div class="control-group">
				<input id="createarea_id" type="button" class="btn btn-lightgreen map-panel-controls" value="Create Area"
					style='display: none'>
			</div>

			<div class="control-group">
				<div class="controls">
					<input id="coordinates_id" name="coordinates" type="hidden" value="undefined">
				</div>
				<div id="fusiontable-form-c" class="map-panel-fusiontable" style='display: none'>
					<label class="control-label map-panel-controls" for="boundary_ft" data-toggle="tooltip"
						title="If your area's boundary is already in a fusion table, link to it here."> Fusion Table Id: <span
						style="color: #ff0000">*</span></label> <input class="map-panel-controls" id="boundary_ft" name="boundary_ft" type="text" />
				</div>
				<div id="boundary-instructions" style='display: none'></div>
			</div>
			<form action=""></form>

	</div>
</div>

{% include "includes/project_scripts.html" %} {% include "includes/map_scripts.html" %}

<script src="/static/js/vendor/codemirror.js" type="text/javascript"></script>
<!-- geojson editor -->
<script src="/static/js/vendor/javascript.js" type="text/javascript"></script>
<!-- Context highlighting for json in editor -->
<script src="/static/js/vendor/simplescrollbars.js" type="text/javascript"></script>
<!-- for editor -->
<script src="/static/js/vendor/placeholder.js" type="text/javascript"></script>
<!-- for editor -->

<script src="/static/js/vendor/lint.js" type="text/javascript"></script>
<!-- addon for editor -->
<script src="/static/js/vendor/geojsonhint.js" type="text/javascript"></script>
<!-- parses geojson-->
<script src="/static/js/vendor/jsonlint-min.js" type="text/javascript"></script>
<!-- parses json can remove min to debug-->
<script src="/static/js/geojson-lint.js" type="text/javascript"></script>
<!-- addon connects lint to editor -->

<script src="/static/js/new-area.js" type="text/javascript"></script>
{% endblock %} {% block footer_js%} {% endblock footer_js %}

